# ========================================
# DigitalOcean VPS Production Configuration
# Restaurant Management System
# ========================================
#
# Instructions:
# 1. Copy this file: cp .env.example .env
# 2. Update all values marked with YOUR_*
# 3. Generate strong secrets (see commands below)
# 4. Never commit .env to Git!
#
# Hướng dẫn:
# 1. Copy file này: cp .env.example .env
# 2. Cập nhật tất cả giá trị có YOUR_*
# 3. Tạo secrets mạnh (xem lệnh bên dưới)
# 4. Không bao giờ commit .env vào Git!
#
# ========================================

# ========================================
# APPLICATION ENVIRONMENT
# ========================================

NODE_ENV=production
PORT=5000
API_VERSION=v1

# ========================================
# DOMAIN CONFIGURATION
# ========================================
# Replace with your actual domain
# Thay bằng domain thật của bạn

DOMAIN=yourdomain.com
CLIENT_URL=https://yourdomain.com
API_BASE_URL=https://yourdomain.com

# Frontend environment variables (cho Next.js)
NEXT_PUBLIC_API_URL=https://yourdomain.com/api/v1
NEXT_PUBLIC_SOCKET_URL=https://yourdomain.com

# ========================================
# DATABASE CONFIGURATION (PostgreSQL)
# ========================================
# ⚠️  IMPORTANT: Change passwords to strong random values!
# ⚠️  QUAN TRỌNG: Đổi passwords thành giá trị ngẫu nhiên mạnh!

POSTGRES_USER=restaurant_admin
POSTGRES_PASSWORD=CHANGE_THIS_TO_STRONG_PASSWORD_32_CHARS
POSTGRES_DB=restaurant_db
POSTGRES_PORT=5432

# Full database URL (Docker internal network)
# URL database đầy đủ (mạng Docker internal)
DATABASE_URL=postgresql://restaurant_admin:CHANGE_THIS_TO_STRONG_PASSWORD_32_CHARS@postgres:5432/restaurant_db?schema=public

# ========================================
# REDIS CONFIGURATION
# ========================================
# ⚠️  IMPORTANT: Change password!
# ⚠️  QUAN TRỌNG: Đổi password!

REDIS_PASSWORD=CHANGE_THIS_TO_STRONG_REDIS_PASSWORD
REDIS_PORT=6379
REDIS_URL=redis://:CHANGE_THIS_TO_STRONG_REDIS_PASSWORD@redis:6379

# ========================================
# JWT SECRETS
# ========================================
# ⚠️  CRITICAL: Generate strong random secrets (32+ characters)!
# ⚠️  NGUY HIỂM: Tạo secrets ngẫu nhiên mạnh (32+ ký tự)!
#
# Generate with / Tạo bằng:
# Option 1 - OpenSSL:
#   openssl rand -base64 32
#
# Option 2 - Node.js:
#   node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
#
# Option 3 - PowerShell:
#   -join ((65..90) + (97..122) + (48..57) | Get-Random -Count 32 | % {[char]$_})

JWT_SECRET=CHANGE_THIS_GENERATE_RANDOM_32_PLUS_CHARACTERS
JWT_REFRESH_SECRET=CHANGE_THIS_DIFFERENT_FROM_ABOVE_32_PLUS_CHARS

# Token expiration times
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ========================================
# FILE STORAGE CONFIGURATION
# ========================================
# Options: 'local', 'r2', 'cloudinary'
# Tùy chọn: 'local', 'r2', 'cloudinary'

# Use 'local' for simple setup (files stored in Docker volume)
# Dùng 'local' cho setup đơn giản (files lưu trong Docker volume)
STORAGE_TYPE=local

# ========================================
# CLOUDFLARE R2 (Recommended for production)
# ========================================
# Sign up: https://dash.cloudflare.com/
# Create R2 bucket and get credentials
# Đăng ký: https://dash.cloudflare.com/
# Tạo R2 bucket và lấy credentials

# Uncomment and fill if using R2:
# R2_ACCOUNT_ID=YOUR_CLOUDFLARE_ACCOUNT_ID
# R2_BUCKET_NAME=YOUR_BUCKET_NAME
# R2_ACCESS_KEY_ID=YOUR_R2_ACCESS_KEY
# R2_SECRET_ACCESS_KEY=YOUR_R2_SECRET_KEY
# R2_PUBLIC_URL=https://YOUR_PUBLIC_URL

# ========================================
# CLOUDINARY (Alternative - Legacy)
# ========================================
# Sign up: https://cloudinary.com/
# Get credentials from dashboard
# Đăng ký: https://cloudinary.com/
# Lấy credentials từ dashboard

# Uncomment and fill if using Cloudinary:
# CLOUDINARY_CLOUD_NAME=YOUR_CLOUD_NAME
# CLOUDINARY_API_KEY=YOUR_API_KEY
# CLOUDINARY_API_SECRET=YOUR_API_SECRET

# ========================================
# CORS CONFIGURATION
# ========================================
# Should match CLIENT_URL for security
# Nên trùng với CLIENT_URL cho bảo mật

CORS_ORIGIN=https://yourdomain.com

# ========================================
# LOGGING
# ========================================

LOG_LEVEL=info
# Options: error, warn, info, debug
# Tùy chọn: error, warn, info, debug

# ========================================
# RATE LIMITING
# ========================================
# Protect against DDoS and brute force
# Bảo vệ chống DDoS và brute force

RATE_LIMIT_WINDOW_MS=900000
# 15 minutes in milliseconds / 15 phút tính bằng milliseconds

RATE_LIMIT_MAX_REQUESTS=100
# Max requests per window / Số request tối đa mỗi window

# ========================================
# SESSION CONFIGURATION
# ========================================
# Generate strong session secret
# Tạo session secret mạnh

SESSION_SECRET=CHANGE_THIS_TO_RANDOM_SECRET_32_CHARS
SESSION_MAX_AGE=86400000
# 24 hours in milliseconds / 24 giờ tính bằng milliseconds

# ========================================
# EMAIL CONFIGURATION (Optional)
# ========================================
# Uncomment if you need email notifications
# Bỏ comment nếu cần email notifications

# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password
# EMAIL_FROM=noreply@yourdomain.com

# ========================================
# MONITORING & ANALYTICS (Optional)
# ========================================

# Sentry for error tracking
# SENTRY_DSN=YOUR_SENTRY_DSN

# Google Analytics
# NEXT_PUBLIC_GA_ID=YOUR_GA_ID

# ========================================
# DEPLOYMENT INFO
# ========================================
# For reference only, not used by application
# Chỉ để tham khảo, không dùng bởi ứng dụng

# DEPLOYMENT_DATE=2024-11-25
# DEPLOYMENT_VERSION=1.0.0
# SERVER_LOCATION=DigitalOcean SGP1
# DROPLET_SIZE=1GB RAM / 1 vCPU

# ========================================
# SECURITY CHECKLIST
# ========================================
# Before going live, verify:
# Trước khi chạy production, kiểm tra:
#
# [ ] All CHANGE_THIS_* values updated
# [ ] JWT secrets are strong (32+ chars)
# [ ] Database passwords are strong (24+ chars)
# [ ] DOMAIN set to actual domain
# [ ] CLIENT_URL and CORS_ORIGIN match
# [ ] .env file permissions set to 600 (chmod 600 .env)
# [ ] .env file NOT in Git (.gitignore)
# [ ] STORAGE_TYPE configured (local/r2/cloudinary)
# [ ] Firewall rules active (UFW)
# [ ] SSL certificate working (HTTPS)
#
# ========================================
# HELPFUL COMMANDS
# ========================================
#
# Generate JWT secret:
#   openssl rand -base64 32
#
# Generate password:
#   openssl rand -base64 24
#
# Set file permissions:
#   chmod 600 .env
#
# Verify environment loaded:
#   docker exec restaurant_server_prod env | grep NODE_ENV
#
# Test database connection:
#   docker exec restaurant_postgres_prod psql -U restaurant_admin -d restaurant_db -c "SELECT 1;"
#
# ========================================
# SUPPORT
# ========================================
# Documentation: /deploy/digitalocean/DEPLOYMENT_GUIDE_VI.md
# Security: /deploy/digitalocean/SECURITY_CHECKLIST.md
# Quick Reference: /deploy/digitalocean/QUICK_REFERENCE.md
# ========================================
