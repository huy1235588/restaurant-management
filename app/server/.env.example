# ============================================
# SERVER ENVIRONMENT CONFIGURATION
# ============================================
# This file is used by the backend server (Node.js/Express)
# Copy this file to .env and update the values
# ⚠️ NEVER commit .env file with real secrets to repository

# ============================================
# DATABASE CONFIGURATION
# ============================================
# PostgreSQL connection string
# Local development: postgresql://restaurant_admin:restaurant_password_dev@localhost:5432/restaurant_db?schema=public
# Docker development: postgresql://restaurant_admin:restaurant_password_dev@postgres:5432/restaurant_db?schema=public
# Production: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
DATABASE_URL="postgresql://your_db_user:your_db_password@localhost:5432/your_db_name"

# ============================================
# SERVER CONFIGURATION
# ============================================
PORT=5000
NODE_ENV=development
HOST=localhost
APP_URL=http://localhost:5000
# API versioning
API_VERSION=v1
API_BASE_URL=http://localhost:5000

# ============================================
# AUTHENTICATION
# ============================================
# Secret key for JWT token
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
JWT_SECRET=your_jwt_secret_key_here
JWT_REFRESH_SECRET=your_jwt_refresh_secret_key_here
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Bcrypt rounds for password hashing
BCRYPT_ROUNDS=10

# Rate limiting
RATE_LIMIT_WINDOW_MS=10000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# CORS (Cross-Origin Resource Sharing)
# ============================================
# Client URL for CORS
CORS_ORIGIN=http://localhost:3000, http://192.168.1.12:3000
# Additional allowed origins (comma-separated for multiple)
# ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ============================================
# REDIS CONFIGURATION (Caching & Session Store)
# ============================================
# Local development
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
# Docker development: redis://redis:6379
# Production with password: redis://:[PASSWORD]@[HOST]:[PORT]
REDIS_URL=redis://localhost:6379

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
# Maximum file size (in bytes) - 5MB = 5242880, 10MB = 10485760, 20MB = 20971520
MAX_FILE_SIZE=5242880
UPLOAD_DIR=./uploads

# Storage type: 'local', 'r2', or 'cloudinary'
# Use lowercase for consistency
STORAGE_TYPE=local
# Base URL for serving uploaded files when using local storage
BASE_URL=http://localhost:3000

# ============================================
# CLOUDFLARE R2 STORAGE (✅ RECOMMENDED FOR PRODUCTION)
# ============================================
# Sign up at: https://www.cloudflare.com/r2/
# Get credentials from your Cloudflare R2 dashboard
R2_ACCOUNT_ID=your_r2_account_id
R2_BUCKET_NAME=your_r2_bucket_name
R2_ACCESS_KEY_ID=your_r2_access_key_id
R2_SECRET_ACCESS_KEY=your_r2_secret_access_key
R2_PUBLIC_URL=https://your_r2_public_url

# ============================================
# CLOUDINARY CONFIGURATION (for production file uploads)
# ============================================
# Sign up at: https://cloudinary.com
# Get credentials from your Cloudinary account dashboard
CLOUDINARY_CLOUD_NAME=your_cloudinary_cloud_name
CLOUDINARY_API_KEY=your_cloudinary_api_key
CLOUDINARY_API_SECRET=your_cloudinary_api_secret

# ============================================
# EMAIL CONFIGURATION (Optional)
# ============================================
# Gmail configuration for sending emails
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your-email@gmail.com
# Use app-specific password for Gmail, not your account password
EMAIL_PASSWORD=your-app-password
EMAIL_FROM=Restaurant Management <noreply@restaurant.com>

# ============================================
# PAYMENT GATEWAY CONFIGURATION
# ============================================
# MoMo Payment (Vietnam)
MOMO_PARTNER_CODE=your_momo_partner_code
MOMO_ACCESS_KEY=your_momo_access_key
MOMO_SECRET_KEY=your_momo_secret_key
MOMO_RETURN_URL=http://localhost:3000/payment/success
MOMO_NOTIFY_URL=http://localhost:5000/api/v1/payments/momo/notify

# VNPay Payment (Vietnam)
VNPAY_TMN_CODE=your_vnpay_tmn_code
VNPAY_HASH_SECRET=your_vnpay_hash_secret
VNPAY_RETURN_URL=http://localhost:3000/payment/success
VNPAY_IPN_URL=http://localhost:5000/api/v1/payments/vnpay/ipn

# ============================================
# LOGGING CONFIGURATION
# ============================================
# Log level: 'error', 'warn', 'info', 'debug', 'trace'
LOG_LEVEL=info
LOG_FILE=./logs/app.log
# Enable request/response logging
LOG_REQUESTS=true

# ============================================
# APPLICATION CONFIGURATION
# ============================================
# Timezone
TZ=Asia/Ho_Chi_Minh

# Application name
APP_NAME=Restaurant Management System
APP_VERSION=1.0.0

# Enable/disable features
FEATURE_INVENTORY_MANAGEMENT=true
FEATURE_RESERVATION_SYSTEM=true
FEATURE_ORDER_MANAGEMENT=true
FEATURE_BILLING_SYSTEM=true

# ============================================
# DATABASE SEED & MIGRATION
# ============================================
# Automatically run migrations on startup
AUTO_RUN_MIGRATIONS=true
# Automatically seed database on first run
AUTO_SEED_DATABASE=false